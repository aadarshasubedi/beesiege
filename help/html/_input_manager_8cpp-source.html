<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>BeeSiege: My Documents/Penn/CIS899/BeeSiege/Code/BeeSiege/InputManager.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.4 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>My Documents/Penn/CIS899/BeeSiege/Code/BeeSiege/InputManager.cpp</h1><a href="_input_manager_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00004"></a>00004 <span class="preprocessor">#include "<a class="code" href="_input_manager_8h.html">InputManager.h</a>"</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include "<a class="code" href="_game_manager_8h.html">GameManager.h</a>"</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include "<a class="code" href="_game_app_8h.html">GameApp.h</a>"</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include "<a class="code" href="_bee_8h.html">Bee.h</a>"</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include "<a class="code" href="_locust_8h.html">Locust.h</a>"</span>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="comment">//------------------------------------------------------------------- </span>
<a name="l00015"></a><a class="code" href="class_input_manager.html#8be46886da639b26d67181c29dab6d6c">00015</a> <span class="comment"></span><a class="code" href="class_input_manager.html#8be46886da639b26d67181c29dab6d6c">InputManager::InputManager</a>()
<a name="l00016"></a>00016 {
<a name="l00017"></a>00017 }
<a name="l00018"></a>00018 <span class="comment">//------------------------------------------------------------------- </span>
<a name="l00023"></a><a class="code" href="class_input_manager.html#f518290877dd183606709d5852db5491">00023</a> <span class="comment"></span><a class="code" href="class_input_manager.html#f518290877dd183606709d5852db5491">InputManager::~InputManager</a>()
<a name="l00024"></a>00024 {
<a name="l00025"></a>00025 }
<a name="l00026"></a>00026 <span class="comment">//------------------------------------------------------------------- </span>
<a name="l00033"></a><a class="code" href="class_input_manager.html#1d62d8480874815164b2b1e765cfb669">00033</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="class_input_manager.html#1d62d8480874815164b2b1e765cfb669">InputManager::ProcessInput</a>(NiInputSystemPtr inputSystem, <a class="code" href="class_game_app.html">GameApp</a>* gameApp)
<a name="l00034"></a>00034 {
<a name="l00035"></a>00035         <a class="code" href="class_input_manager.html#859f66f5e078f9af700b008922c9bf66">ProcessKeyboard</a>(inputSystem-&gt;GetKeyboard(), gameApp);
<a name="l00036"></a>00036         <a class="code" href="class_input_manager.html#cb6d84c58b0580da77b674c3d1a0a670">ProcessMouse</a>(inputSystem-&gt;GetMouse(), gameApp);
<a name="l00037"></a>00037 }
<a name="l00038"></a>00038 <span class="comment">//------------------------------------------------------------------- </span>
<a name="l00045"></a><a class="code" href="class_input_manager.html#859f66f5e078f9af700b008922c9bf66">00045</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="class_input_manager.html#859f66f5e078f9af700b008922c9bf66">InputManager::ProcessKeyboard</a>(NiInputKeyboard* keyboard,<a class="code" href="class_game_app.html">GameApp</a>* gameApp)
<a name="l00046"></a>00046 {
<a name="l00047"></a>00047         <a class="code" href="class_game_manager.html">GameManager</a>* gameMgr = <a class="code" href="class_singleton_obj.html#777b90150e6dfb61ad461593302ddb9a">GameManager::Get</a>();
<a name="l00048"></a>00048         <span class="keywordflow">if</span> (keyboard != 0)
<a name="l00049"></a>00049     {
<a name="l00050"></a>00050                 <span class="comment">// move queen forward</span>
<a name="l00051"></a>00051                 <span class="keywordflow">if</span> (keyboard-&gt;KeyIsDown(NiInputKeyboard::KEY_W))
<a name="l00052"></a>00052                 {
<a name="l00053"></a>00053                         gameMgr-&gt;<a class="code" href="class_game_manager.html#ef9e3f3718ea68f8d661b99c8552a742">GetQueen</a>()-&gt;MoveForward();
<a name="l00054"></a>00054                 }
<a name="l00055"></a>00055                 <span class="comment">// move queen backward</span>
<a name="l00056"></a>00056                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (keyboard-&gt;KeyIsDown(NiInputKeyboard::KEY_S))
<a name="l00057"></a>00057                 {
<a name="l00058"></a>00058                         gameMgr-&gt;<a class="code" href="class_game_manager.html#ef9e3f3718ea68f8d661b99c8552a742">GetQueen</a>()-&gt;MoveBack();
<a name="l00059"></a>00059                 }
<a name="l00060"></a>00060                 <span class="comment">// move queen left</span>
<a name="l00061"></a>00061                 <span class="keywordflow">if</span> (keyboard-&gt;KeyIsDown(NiInputKeyboard::KEY_A))
<a name="l00062"></a>00062                 {
<a name="l00063"></a>00063                         gameMgr-&gt;<a class="code" href="class_game_manager.html#ef9e3f3718ea68f8d661b99c8552a742">GetQueen</a>()-&gt;StrafeLeft();
<a name="l00064"></a>00064                 }
<a name="l00065"></a>00065                 <span class="comment">// move queen right</span>
<a name="l00066"></a>00066                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (keyboard-&gt;KeyIsDown(NiInputKeyboard::KEY_D))
<a name="l00067"></a>00067                 {
<a name="l00068"></a>00068                         gameMgr-&gt;<a class="code" href="class_game_manager.html#ef9e3f3718ea68f8d661b99c8552a742">GetQueen</a>()-&gt;StrafeRight();     
<a name="l00069"></a>00069                 }
<a name="l00070"></a>00070                 <span class="comment">// add a bee</span>
<a name="l00071"></a>00071                 <span class="keywordflow">if</span>(keyboard-&gt;KeyWasPressed(NiInputKeyboard::KEY_SPACE))
<a name="l00072"></a>00072                 {
<a name="l00073"></a>00073                         gameMgr-&gt;<a class="code" href="class_game_manager.html#eb35d8384016ccdcfffb8d31622195fa">AddObject</a>((GameObj3dPtr)(NiNew <a class="code" href="class_bee.html">Bee</a>), gameApp-&gt;<a class="code" href="class_game_app.html#2222538238ba5e4df2ff8036e371e286">GetScene</a>(), gameApp-&gt;<a class="code" href="class_game_app.html#bddde25dd2c28e4411dbc5676a4873b9">GetPhysXScene</a>());
<a name="l00074"></a>00074                         
<a name="l00075"></a>00075                 }
<a name="l00076"></a>00076                 <span class="comment">// add a locust</span>
<a name="l00077"></a>00077                 <span class="keywordflow">if</span>(keyboard-&gt;KeyWasPressed(NiInputKeyboard::KEY_E))
<a name="l00078"></a>00078                 {
<a name="l00079"></a>00079                         gameMgr-&gt;<a class="code" href="class_game_manager.html#eb35d8384016ccdcfffb8d31622195fa">AddObject</a>((GameObj3dPtr)(NiNew <a class="code" href="class_locust.html">Locust</a>), gameApp-&gt;<a class="code" href="class_game_app.html#2222538238ba5e4df2ff8036e371e286">GetScene</a>(), gameApp-&gt;<a class="code" href="class_game_app.html#bddde25dd2c28e4411dbc5676a4873b9">GetPhysXScene</a>());
<a name="l00080"></a>00080                         
<a name="l00081"></a>00081                 }
<a name="l00082"></a>00082                 <span class="comment">// cycle through targets</span>
<a name="l00083"></a>00083                 <span class="keywordflow">if</span>(keyboard-&gt;KeyWasPressed(NiInputKeyboard::KEY_TAB))
<a name="l00084"></a>00084                 {
<a name="l00085"></a>00085                         gameMgr-&gt;<a class="code" href="class_game_manager.html#ef9e3f3718ea68f8d661b99c8552a742">GetQueen</a>()-&gt;CycleTarget(gameMgr-&gt;<a class="code" href="class_game_manager.html#53862cb2984d21221bf25c532e3efea1">GetEnemies</a>());
<a name="l00086"></a>00086                         
<a name="l00087"></a>00087                 }
<a name="l00088"></a>00088     }
<a name="l00089"></a>00089 }
<a name="l00090"></a>00090 <span class="comment">//------------------------------------------------------------------- </span>
<a name="l00097"></a><a class="code" href="class_input_manager.html#cb6d84c58b0580da77b674c3d1a0a670">00097</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="class_input_manager.html#cb6d84c58b0580da77b674c3d1a0a670">InputManager::ProcessMouse</a>(NiInputMouse* mouse, <a class="code" href="class_game_app.html">GameApp</a>* gameApp)
<a name="l00098"></a>00098 {
<a name="l00099"></a>00099         <span class="keywordflow">if</span> (mouse != NULL)
<a name="l00100"></a>00100         {
<a name="l00101"></a>00101                 <span class="keywordtype">int</span> mx, my, mz;
<a name="l00102"></a>00102                 mouse-&gt;GetPositionDelta(mx, my, mz);
<a name="l00103"></a>00103 
<a name="l00104"></a>00104                 <a class="code" href="class_game_manager.html">GameManager</a>* gameMgr = <a class="code" href="class_singleton_obj.html#777b90150e6dfb61ad461593302ddb9a">GameManager::Get</a>();
<a name="l00105"></a>00105 
<a name="l00106"></a>00106                 <span class="comment">// select more soldiers</span>
<a name="l00107"></a>00107                 <span class="keywordflow">if</span>(mouse-&gt;ButtonIsDown(NiInputMouse::NIM_LEFT))
<a name="l00108"></a>00108                 {
<a name="l00109"></a>00109                         gameMgr-&gt;<a class="code" href="class_game_manager.html#ef9e3f3718ea68f8d661b99c8552a742">GetQueen</a>()-&gt;SelectMoreSoldiers();
<a name="l00110"></a>00110                 }
<a name="l00111"></a>00111                 <span class="comment">// stop selecting soldiers</span>
<a name="l00112"></a>00112                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(mouse-&gt;ButtonWasReleased(NiInputMouse::NIM_LEFT))
<a name="l00113"></a>00113                 {
<a name="l00114"></a>00114                         gameMgr-&gt;<a class="code" href="class_game_manager.html#ef9e3f3718ea68f8d661b99c8552a742">GetQueen</a>()-&gt;StopSelectingSoldiers();
<a name="l00115"></a>00115                 }
<a name="l00116"></a>00116                 <span class="comment">// rotate view</span>
<a name="l00117"></a>00117                 <span class="keywordflow">if</span>(mouse-&gt;ButtonIsDown(NiInputMouse::NIM_RIGHT))
<a name="l00118"></a>00118                 {
<a name="l00119"></a>00119                         gameApp-&gt;<a class="code" href="class_game_app.html#00042dca2cd4c4280eac8cfd7afb3692">GetCameraController</a>()-&gt;RotateCamera((<span class="keywordtype">float</span>)mx, (<span class="keywordtype">float</span>)my);
<a name="l00120"></a>00120                 }
<a name="l00121"></a>00121                 <span class="comment">// rotate queen</span>
<a name="l00122"></a>00122                 <span class="keywordflow">else</span>
<a name="l00123"></a>00123                 {
<a name="l00124"></a>00124                         gameMgr-&gt;<a class="code" href="class_game_manager.html#ef9e3f3718ea68f8d661b99c8552a742">GetQueen</a>()-&gt;Rotate((<span class="keywordtype">float</span>)mx, (<span class="keywordtype">float</span>)my);
<a name="l00125"></a>00125                 }
<a name="l00126"></a>00126                 <span class="comment">// stop rotating queen</span>
<a name="l00127"></a>00127                 <span class="keywordflow">if</span>(mouse-&gt;ButtonWasReleased(NiInputMouse::NIM_RIGHT))
<a name="l00128"></a>00128                 {
<a name="l00129"></a>00129                         gameApp-&gt;<a class="code" href="class_game_app.html#00042dca2cd4c4280eac8cfd7afb3692">GetCameraController</a>()-&gt;StopRotateCamera();
<a name="l00130"></a>00130                 }
<a name="l00131"></a>00131                 
<a name="l00132"></a>00132         }
<a name="l00133"></a>00133         
<a name="l00134"></a>00134 }
<a name="l00135"></a>00135 <span class="comment">//-------------------------------------------------------------------</span>
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Thu Nov 1 15:28:59 2007 for BeeSiege by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.4 </small></address>
</body>
</html>
