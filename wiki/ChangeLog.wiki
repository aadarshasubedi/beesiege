#summary Changes Log

= Introduction =

Post notes about the changes you made over here. Thank you.


= Log =

*21-Oct-2007* - _Vaios

I created a repository so please use it.

*24-Oct-2007* - _Vaios

I am working on creating an XML configuration file, that will contain all of the constants that we will be using. I'll post more on this later. 

Also we need to make sure that everybody is working on something. So I'm going to be working on creating a controller that will try to align the queen with the XZ plane. As far as I know Smiral will be working on the scene, creating bounding volumes for the mountains etc. Ruhi there are two things I can think of for you right now. The camera controller, that makes the camera slide on the bounding volumes of the scene or the AI Framework. I think the camera controller is more urgent so would you like to work on that?

*24-Oct-2007* - _Vaios

I added the [http://beesiege.googlecode.com/svn/trunk/ConfigurationManager.cpp ConfigurationManager], which reads a configuration file which contains all of the  constant values that we use here and there. The configuration file is an XML file and its schema is configurationSchema.rng. This schema is written in RELAX NG, which is a type of validation language for XML. If you want to modify the XML file or add stuff to it, make sure you make the appropriate changes to the XML schema and validate it using jing. To run jing type the following: `jing configurationSchema.rng configuration.xml`.

Also I added a UML diagram of the classes we are using. It is an HTML file but it works only in Internet Explorer... (sry not my fault :P). So check that out if you want.

That's it for now.

*25-Oct-2007* - _Vaios

I changed the camera and character controllers so that the force is calculated correctly. Also I changed the way the camera moves. Now it doesn't rotate on its local z axis, but it only "strafes" on the y axis. This way we avoid the problem where the world is rotated.


*26-Oct-2007* - _Vaios

I added a lot of things now. First of all the user can now select a number of bees by holding down the left mouse button and when the button is released the selected bees will go to a target. When the left button is pressed a counter is increased and when it is released the queen sorts the soldiers according to their distance from a target, using Merge Sort. Then the desired number goes to the target. Also when a bee is selected its color changes to green. 

I also added an enemy (Locust). The user can target an enemy and cycle through targets. Only the targets that are close to the queen can be selected. When an enemy is selected its color changes to red. A bee can go to an enemy if the queen commands it to do so, but the mechanism is not complete yet.

Finally (I think), I added a [http://beesiege.googlecode.com/svn/trunk/TextManager.cpp TextManager] which is used to display text on screen, and I currently use it to display the number of bees selected.

A major problem is performance. For some reason the game is crawling when we add more than ten PhysX objects and I cannot tell why this is happening. I have a strong feeling though that there is something wrong with PhysX...

*28-Oct-2007* - _Vaios

So the issue with the performance was actually an issue with the camera, which is now fixed. I also changed the way we select soldiers, so now soldiers are selected one by one. Therefore there is no need for Merge Sort (thx Ruhi). Now I really need the FSM framework.

Also I replaced std::lists with NiTPointerLists. I think it's faster.

*28-Oct-2007* - _Vaios

I added 3D sound. It's not completely ready yet I'm just making sure the framework works fine. It's not bad... 

*30-Oct-2007* - _Smiral

I am working on the scene... Would be testing in the lab around 5 today ... as the nif viewer on my machine is not working.

*31-Oct-2007* - _Smiral

I have made a scene with surrounding walls as passive physx boxes. Please check it out. 

*1-Nov-2007* - _Vaios

The current status of the game is this: The soldiers follow the queen using a Behavior Combo that consists of Arrival, Separation, Wander and Departure. They also look at where the queen is looking IF the queen is their current target. The user can select a number of bees by holding down the left mouse button, and send the bees to a target when the left button is released. This has to change, because changing the target is not enough. We have to use the FSM's here to make the bees go into attack mode. We'll see how we're gonna do that. 

There is 3d sound support but the system is currently inactive. We should play around with sound after all the major parts are implemented. The user can also go into look-around mode, which is currently not working as it should so I'll take care of that. The scene Smiral sent me, the one with the PhysX boundaries is now the scene that we load. The walls work, although they should be placed better so that no object gets inside a mountain. 

I just added fog. Fog is present all the time and it is needed because otherwise we need to set the far clipping plane of the camera far away, which is very inefficient. Fog hides that. Also it is essential from a gameplay perspective. Now if the queen goes higher than a certain point, fog increases very much in a smooth way so that the user cannot see almost nothing. This is to prevent the user from going higher than we want him to. Adding fog is very easy and we can work on that to make it look better later.

A last thing I want to say has to do with comments in the code. I started writing comments in a Javadoc way. This is a special format of comments that various tools can use to create HTML documentation of very high quality. All of my code uses Javadoc comments and I created HTML documentation using Doxygen. You can check it out by opening index.html in the help/html folder of the game. I suggest that you write comments for your functions this way, so that everything is consistent. If you don't want to it's fine, I just think it's prettier. To learn how to write Javadoc comments just look at my code and you should have no problem. The only basic thing you have to do is write your comment like this `/** comment */`. Note that Javadoc comments are only for explaining what a function does. Not for explaining lines of code inside the function.

So things to be done: 
    * Finish the scene
    * Start using the FSM's in a meaningful way. We should meet to do that
    * Fix the look-around mode
    * Start creating some gameplay elements

We should meet one of these days. Let me know when... Cheers!

*1-Nov-2007* - _Ruhi

Wow, I can't wait to see the fog! I made the FSM code changes that we discussed this morning. I can meet tomorrow evening after 4:00pm. Saturday morning also works for me. I won't be available on Sunday and Monday.

*1-Nov-2007* - _Vaios

I fixed the look-around mode, so that the camera now moves to the head of the queen. Now I would rather meet u guys Saturday morning, does that work for you guys?

*1-Nov-2007* - _Smiral

Saturday morning works fine with me. I will try and finish the scene by then (hoping that Maya doesn't crash on me big time). The fog sounds exciting... Wanna see that soon. 

*3-Nov-2007* - _Ruhi

I've added code to all the state files with the basic logic of transitions from one state to other states. Going from here, I will stitch the FSMMachine with the states so that we can just add a machine to every game character and they should behave according to their respective FSM.

Also, as I see it, many of the current behaviors of the characters will be called through the update function in the state files. But we can should try not to make drastic changes to the working code because that may be too much effort.

I have yet to complete a lot of this, so please have patience :)

We would need new GameCharacter to represent PowerUps.

*4-Nov-2007* - _Smiral

Guys, am still working on the model.... Its taking quite a long time... I am like 40% done and am planning to be done in a day.

*6-Nov-2007* - _Ruhi

I modified all the FSMState files to complete the CheckTransitions methods which means that the algo for changing from one state to another now makes sense. How we want the characters to behave in each state will require some more work in both the FSM and the existing Game code.

I have defined the UpdatePerceptions method in AIControl files. Vaios, if you check my comments in these methods, you will know exactly what new getter methods I need in the Bee, Queen and Locust files. They should be small to implement. If you finish those, you can just uncomment my lines of code in my files or let me know and I'll do it.

Once that is done, we will have to sit together to see how and where in the code do we attach the FSMMachines to the characters. I hope it won't be too hard!

Oh, since it's too painful to review code, I wouldn't expect you guys to do that but there may be some errors that I've overlooked and we may have to resolve those during integration.

-Ruhi

*7-Nov-2007* - _Smiral

Hi, 
Finally I have completed the model covered with Physx objects ... Phew... 
My final count of number of models I saved in this process is somewhere around 55. 

Anyways, its done now... Guys I am mailing out the nif file. Vaios please check it out if the scene works fine.... and if there are any noticeable inaccuracies in making the models. Also the height of physx objects for every mountain is higher than it seems. 

We might need to export this scene again from Vaios's comp as my nif exporter does not export the textures. But that can be worked out later. 

- Smiral

*11-Nov-2007* - _Vaios

I made huge changes to the code in order to achieve the following:
  * Game characters should not know what is happenning in the game. They should not be aware of what type of controllers they have or if the user is controlling them. 
  * We should code everything keeping in mind that maybe there are a lot of queens in the game and not only one. I pretty much achieved this but it's not there yet. I will not work more on this because of lack of time. However now it should be fairly easy to implement this if we want to. 
  * The characters should be component-based. If they have a controller then they can move in the scene. If they have a sound component then that can produce sounds etc. This is the design I'm following from now on. This is implemented through the CharacterAttribute class. A controller is an attribute. A sound is an attribute and so on. A game character has a list of attributes which can be used to add functionality to them. 

This means that for example Health is an attribute. Some characters might have health some might not. This could be anything, it could be armor for example or special powers. The only thing we need to do is create something that inherits from CharacterAttribute and add it to the Characters attribute list. The attributes will have an update function so the only thing we have to do to make the attributes work would be to call their update functions. I'm not totally sure about this design approach yet, but I'm definitely using attributes. I'll post the code once I'm sure about the changes.

Cheers.


*20-Nov-2007* - _Ruhi

Here is what we have discussed about the gameplay so far. I think we should not deviate too much now and just pick what should be done from here.

===Character modifications===

* Types of Bees:*
  # Healers - these bees will heal the wounded bees if they are close enough
  # Honey bees - they collect nectar from the flowers
  # Soldier bees 1 - they attack the enemy
  # Soldier bees 2 - they are bigger and stronger soldier bees

* Types of Enemies:*
  # Locust - short-sighted, they attack the closest target
  # Dragonfly - they are on the lookout for the Queen bee 
  # Other enemies - maybe they eat up the honey, so they should be killed

===Queen Functions===
  # The queen has to be close to the target in order to launch an attack
  # The strength of the soldier bees is inversely proportional to their distance from the queen - 
  smaller distance = higher confidence = less health lost = more damage done

   very large distance  = low confidence = lose health quickly = less damage done

===Attack mechanism:===
  # Right-click - Select the soldier bees
  # Right-release - Attack the target with separation (default behavior)
  # Left-click - If target selected, add cohesion to attacking group

===New State:===
*Auto-attack* - If an enemy is too close, the soldier bees close to the queen that are not    already engaged in another attack will start attacking this enemy.

===Resource control:===
  # Flower beds - honey bees collect nectar here. More the nectar created, higher the capacity to spawn new bees

  # Enemy bases - Each housing an enemy boss. Kill the boss = destroy the base. Each base spawns enemies depending on the health of the respective boss.

Now, who will explain this to Lane :D?